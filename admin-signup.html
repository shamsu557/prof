<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Creation</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
 <link rel="stylesheet" href="admins.css">

  
</head>
<body>
  <!-- Moving text banner -->
  <div class="marquee-container">
    <div><img src="educap.jfif" class="fixed-image" alt="Education Cap"></div>
    <div class="marquee-text">
      Here Admin Signup. Register to manage the platform with authorized credentials.
    </div>
    <div><img src="prof.jpeg" class="fixed-image" alt="Professor Picture"></div>
  </div>  
  
<!-- Admin Login Form -->
<div class="container" id="loginContainer">
  <form id="loginForm" class="border p-4 shadow-sm rounded">
      <div class="card-header text-center">
          Admin Creation Login
      </div>
      <div class="card-body">
          <div class="form-group">
              <label for="loginUsername">Username</label>
              <input type="text" class="form-control" id="loginUsername" required>
          </div>
          <div class="form-group">
              <label for="loginPassword">Password</label>
              <input type="password" class="form-control" id="loginPassword" required>
          </div>
          <button type="submit" class="btn btn-primary btn-block">Login</button>
      </div>
  </form>
</div>

<!-- Admin Signup Form -->
<div class="container" id="signupContainer">
  <form id="signupForm" action="/admin-signup" method="POST" class="border p-4 shadow-sm rounded">
      <div class="card-header text-center">
          Admin Creation
      </div>
      <div class="card-body">
          <div class="form-group">
              <label for="fullName">Full Name</label>
              <input type="text" class="form-control" id="fullName" name="fullName" required>
          </div>
          <div class="row">
              <div class="col-md-6">
                  <div class="form-group">
                      <label for="username">Email</label>
                      <input type="text" class="form-control" id="email" name="email" required>
                  </div>
              </div>
              <div class="col-md-6">
                  <div class="form-group">
                      <label for="phone">Phone Number</label>
                      <input type="text" class="form-control" id="phone" name="phone" required>
                  </div>
              </div>
          </div>
          <div class="row">
              <div class="col-md-6">
                  <div class="form-group">
                      <label for="email">Username</label>
                      <input type="text" class="form-control" id="username" name="username" required>
                  </div>
              </div>
              <div class="col-md-6">
                  <div class="form-group">
                      <label for="phone">Password</label>
                      <input type="password" class="form-control" id="password" name="password" required>
                  </div>
              </div>
          </div>
          <button type="submit" class="btn btn-primary btn-block">Create Admin</button>
      </div>
  </form>
</div>
<br><br>

   <!-- Footer -->
   <div class="footer">
    <div class="row">
        <div class="col-md-3">
            <p>Professor Ibeawuchi Amagwu Francis</p>
            <p>Email: Frank.Amagwu@gmail.com</p>
            <p>Phone: +234 803 328 4372</p>
        </div>
        <div class="col-md-3">
            <p>Micro and Development Finance</p>
            <p>National Open University of Nigeria</p>
            <a href="https://www.facebook.com/prof.johndoe" target="_blank">
                <i class="fab fa-facebook"></i> Facebook
            </a>
        </div>
        <div class="col-md-3 text-center">
            <p>&copy; 2024 Professor Ibeawuchi Amagwu</p>
            <p>All rights reserved.</p>
        </div>
    </div>
</div>
<!-- Back to top button -->
<button onclick="topFunction()" id="myBtn" title="Go to top"><i class="fas fa-arrow-up"></i></button>
  

  <script>
    // Initially hide the signup form
    const signupContainer = document.getElementById('signupContainer');
    signupContainer.style.display = 'none';

    // Handle login form submission
    document.getElementById('loginForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const username = document.getElementById('loginUsername').value;
        const password = document.getElementById('loginPassword').value;

        // Send login credentials to the backend
        fetch('/admin-creation-login', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ username, password }),
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Hide the login form and show the signup form
                document.getElementById('loginContainer').style.display = 'none';
                signupContainer.style.display = 'block';
            } else {
                alert(data.message);
            }
        })
        .catch(error => console.error('Error:', error));
    });

    // Handle signup form submission
    document.getElementById('signupForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent default form submission

        const formData = new FormData(this);
        const data = Object.fromEntries(formData.entries());

        // Send data to the server
        fetch('/admin-signup', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        })
        .then(response => response.json())
        .then(result => {
            alert(result.message); // Display the response message

            if (result.success) {
                this.reset(); // Reset the form if signup is successful

                if (result.redirectUrl) {
                    window.location.href = result.redirectUrl; // Redirect if redirectUrl is provided
                }
            }
        })
        .catch(error => console.error('Error:', error));
    });
    // Back to top button functionality
    window.onscroll = function() {scrollFunction()};
  
  function scrollFunction() {
      if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
          document.getElementById("myBtn").style.display = "block";
      } else {
          document.getElementById("myBtn").style.display = "none";
      }
  }

  function topFunction() {
      document.body.scrollTop = 0;
      document.documentElement.scrollTop = 0;
  }

</script>

</body>
</html>
